<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nft Info</title>
</head>
<body>

    <h1>Staplez Studios Nft "Candy Chair"</h1>
    <img src="https://lekirfepfblixty3l7rigkank4qiihy34et5en57a6pmlpl7xrza.arweave.net/WRSIlI8oVovPG1_igygNVyCEHxvhJ9I3vweexb1_vHI?ext=png" alt="Candy Chair NFT image" style="max-width:100%; height:auto;">
    <h3>Download & Licensing</h3><br>

    <p>This digital asset is protected by a license agreement. Access to the file itself does not convey any usage rights; these are granted solely through ownership of the corresponding NFT. We encourage you to review the full license agreement to understand the scope of your rights as an NFT holder.</p>

    <button onclick="downloadArweaveFile()">GLB File</button>
    <button onclick="location.href='https://staplezstudio.github.io/CommercialLicense/'">GLB License Information</button>

    <script>
        async function downloadArweaveFile() {
            const arweaveUrl = "https://arweave.net/aYpfaqj08Z5YaoUJ1wjT0LVA_JZTM1Jk0ck-k-z1uko?ext=glb";

            // Prompt the user for the desired filename
            const userFilename = prompt("Enter the desired filename (e.g., mycube.glb):", "CandyRockingChairRev1.glb"); // Default filename

            // If the user clicks Cancel or enters an empty string, stop the process
            if (userFilename === null || userFilename.trim() === "") {
                console.log("Download cancelled by user.");
                return; // Exit the function
            }

            const suggestedFilename = userFilename; // Use the user-provided filename

            try {
                // Fetch the file from Arweave.
                const response = await fetch(arweaveUrl);

                // Check if the fetch was successful
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status} - ${response.statusText}`);
                }

                // Get the file content as a Blob
                const blob = await response.blob();

                // Create a temporary URL for the Blob
                const blobUrl = URL.createObjectURL(blob);

                // Create a temporary anchor element
                const a = document.createElement('a');
                a.href = blobUrl;
                a.download = suggestedFilename; // Use the user-provided (or default) filename

                // Append the anchor to the body
                document.body.appendChild(a);

                // Programmatically click the anchor to trigger the download
                a.click();

                // Clean up
                document.body.removeChild(a);
                URL.revokeObjectURL(blobUrl);

            } catch (error) {
                console.error("Error downloading file:", error);
                alert("Failed to download the file. This might be due to server restrictions or network issues. Check the console for more details.");
            }
        }
    </script>

</body>
</html>
